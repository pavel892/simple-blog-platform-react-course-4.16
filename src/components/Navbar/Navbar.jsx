import { NavLink, useNavigate } from 'react-router-dom';
import { useAuth } from '../../useAuth';
import './Navbar.css';

export default function Navbar() {
  const auth = useAuth();
  const navigate = useNavigate();

  const handleLogout = () => {
    auth.logout();
    navigate('/');
  };
  return (
    <div className="container">
      <NavLink to="/" className="logo-link">
        <p className="logo">Realworld Blog</p>
      </NavLink>

      <nav>
        <NavLink to="/">Home</NavLink>

        {auth.user && (
          <NavLink to="/new-article">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="0.5" y="0.5" width="23" height="23" rx="11.5" stroke="white" />
              <path
                d="M17.8125 8.6875L16.5938 9.90625L14.0938 7.40625L15.3125 6.1875C15.4375 6.0625 15.5938 6 15.7812 6C15.9688 6 16.125 6.0625 16.25 6.1875L17.8125 7.75C17.9375 7.875 18 8.03125 18 8.21875C18 8.40625 17.9375 8.5625 17.8125 8.6875ZM6 15.5L13.375 8.125L15.875 10.625L8.5 18H6V15.5Z"
                fill="#61BB61"
              />
            </svg>
            New Post
          </NavLink>
        )}

        {auth.user && (
          <NavLink to={`profile/${auth.userName}`}>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="0.5" y="0.5" width="23" height="23" rx="11.5" stroke="white" />
              <path
                d="M10.3438 13.6562C10.8021 14.1146 11.3542 14.3438 12 14.3438C12.6458 14.3438 13.1979 14.1146 13.6562 13.6562C14.1146 13.1979 14.3438 12.6458 14.3438 12C14.3438 11.3542 14.1146 10.8021 13.6562 10.3438C13.1979 9.88542 12.6458 9.65625 12 9.65625C11.3542 9.65625 10.8021 9.88542 10.3438 10.3438C9.88542 10.8021 9.65625 11.3542 9.65625 12C9.65625 12.6458 9.88542 13.1979 10.3438 13.6562ZM16.9688 12.6562L18.375 13.75C18.5208 13.8542 18.5417 14 18.4375 14.1875L17.0938 16.5C17.0104 16.6458 16.875 16.6875 16.6875 16.625L15.0312 15.9688C14.5938 16.2812 14.2188 16.5 13.9062 16.625L13.6562 18.375C13.6146 18.5625 13.5104 18.6562 13.3438 18.6562H10.6562C10.4896 18.6562 10.3854 18.5625 10.3438 18.375L10.0938 16.625C9.69792 16.4583 9.32292 16.2396 8.96875 15.9688L7.3125 16.625C7.125 16.6875 6.98958 16.6458 6.90625 16.5L5.5625 14.1875C5.45833 14 5.47917 13.8542 5.625 13.75L7.03125 12.6562C7.01042 12.5104 7 12.2917 7 12C7 11.7083 7.01042 11.4896 7.03125 11.3438L5.625 10.25C5.47917 10.1458 5.45833 10 5.5625 9.8125L6.90625 7.5C6.98958 7.35417 7.125 7.3125 7.3125 7.375L8.96875 8.03125C9.40625 7.71875 9.78125 7.5 10.0938 7.375L10.3438 5.625C10.3854 5.4375 10.4896 5.34375 10.6562 5.34375H13.3438C13.5104 5.34375 13.6146 5.4375 13.6562 5.625L13.9062 7.375C14.3021 7.54167 14.6771 7.76042 15.0312 8.03125L16.6875 7.375C16.875 7.3125 17.0104 7.35417 17.0938 7.5L18.4375 9.8125C18.5417 10 18.5208 10.1458 18.375 10.25L16.9688 11.3438C16.9896 11.4896 17 11.7083 17 12C17 12.2917 16.9896 12.5104 16.9688 12.6562Z"
                fill="#61BB61"
              />
            </svg>
            Settings
          </NavLink>
        )}

        {auth.user && (
          <NavLink to={`profile/${auth.userName}`}>
            {auth.image ? (
              <img
                src={auth.image}
                alt="profile"
                style={{
                  width: '36px',
                  borderRadius: '50%',
                  marginRight: '8px',
                }}
              />
            ) : (
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="0.5" width="23" height="23" rx="11.5" stroke="white" />
                <path
                  d="M8.46875 14.0938C9.69792 13.5938 10.875 13.3438 12 13.3438C13.125 13.3438 14.2917 13.5938 15.5 14.0938C16.7292 14.5729 17.3438 15.2083 17.3438 16V17.3438H6.65625V16C6.65625 15.2083 7.26042 14.5729 8.46875 14.0938ZM13.875 11.2188C13.3542 11.7396 12.7292 12 12 12C11.2708 12 10.6458 11.7396 10.125 11.2188C9.60417 10.6979 9.34375 10.0729 9.34375 9.34375C9.34375 8.61458 9.60417 7.98958 10.125 7.46875C10.6458 6.92708 11.2708 6.65625 12 6.65625C12.7292 6.65625 13.3542 6.92708 13.875 7.46875C14.3958 7.98958 14.6562 8.61458 14.6562 9.34375C14.6562 10.0729 14.3958 10.6979 13.875 11.2188Z"
                  fill="#61BB61"
                />
              </svg>
            )}
            {auth.userName}
          </NavLink>
        )}

        {auth.user && (
          <button className="logout-btn" onClick={handleLogout}>
            Log out
          </button>
        )}

        {!auth.user && <NavLink to="sign-in">Sign in</NavLink>}

        {!auth.user && <NavLink to="sign-up">Sign up</NavLink>}
      </nav>
    </div>
  );
}
